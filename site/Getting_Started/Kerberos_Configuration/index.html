



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../images/logo.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>Kerberos Configuration - Delphix Masking 5.3.2</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.fbb7f3af.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Helvetica+Neue:300,400,400i,700|Ubuntu+Mono">
        <style>body,input{font-family:"Helvetica Neue","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Ubuntu Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#kerberos-configuration" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="Delphix Masking 5.3.2" class="md-header-nav__button md-logo">
          
            <img src="../../images/delphix-logo-white.png" width="153" height="15">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Delphix Masking 5.3.2
              </span>
              <span class="md-header-nav__topic">
                Kerberos Configuration
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <img src="../../images/delphix-logo-white.png" width="48" height="48">
      
    </span>
    Delphix Masking 5.3.2
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Introduction to Delphix Masking" class="md-nav__link">
      Introduction to Delphix Masking
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../What's New for Masking/" title="What's New for Masking Engines" class="md-nav__link">
      What's New for Masking Engines
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Data_Source_Support/" title="Data Source Support" class="md-nav__link">
      Data Source Support
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Installation_First_Time_Setup/" title="Installation/First Time Setup" class="md-nav__link">
      Installation/First Time Setup
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Configuring_Virtualization_Service_for_Masked_Provisioning/" title="Configuring Virtualization Service for Masked Provisioning" class="md-nav__link">
      Configuring Virtualization Service for Masked Provisioning
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Users_Roles/" title="Users and Roles" class="md-nav__link">
      Users and Roles
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Definitions_-_Terms_and_Meanings/" title="Delphix Masking Terminology" class="md-nav__link">
      Delphix Masking Terminology
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Kerberos Configuration
      </label>
    
    <a href="./" title="Kerberos Configuration" class="md-nav__link md-nav__link--active">
      Kerberos Configuration
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminology" title="Terminology" class="md-nav__link">
    Terminology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-kerberos-on-the-appliance" title="Configuring Kerberos on the Appliance" class="md-nav__link">
    Configuring Kerberos on the Appliance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-maskings-database-connectors-using-kerberos" title="Creating Maskings Database Connectors using Kerberos" class="md-nav__link">
    Creating Maskings Database Connectors using Kerberos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-database-configurations" title="Reference Database Configurations" class="md-nav__link">
    Reference Database Configurations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oracle-database" title="Oracle Database" class="md-nav__link">
    Oracle Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ms-sql-server" title="MS SQL Server" class="md-nav__link">
    MS SQL Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sybase" title="Sybase" class="md-nav__link">
    Sybase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Audit_Logs/" title="Audit Logs" class="md-nav__link">
      Audit Logs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../PDF Versions of Masking Documentation/" title="PDF Versions of Masking Documentation" class="md-nav__link">
      PDF Versions of Masking Documentation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Preparing Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Preparing Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Preparing_Data/Preparing_Oracle_Database_For_Profiling_and_Masking/" title="Preparing Oracle Database for Profiling/Masking" class="md-nav__link">
      Preparing Oracle Database for Profiling/Masking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Preparing_Data/Preparing_SQL_Server_Database_For_Profiling_and_Masking/" title="Preparing SQL Server Database For Profiling and Masking" class="md-nav__link">
      Preparing SQL Server Database For Profiling and Masking
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Preparing_Data/Preparing_Sybase_Database_For_Profiling_and_Masking/" title="Preparing Sybase Database For Profiling and Masking" class="md-nav__link">
      Preparing Sybase Database For Profiling and Masking
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Connecting Data to Masking Service
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Connecting Data to Masking Service
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_Data_to_Masking_Service/Managing_Environments/" title="Managing Environments" class="md-nav__link">
      Managing Environments
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_Data_to_Masking_Service/Managing_Connectors/" title="Managing Connectors" class="md-nav__link">
      Managing Connectors
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_Data_to_Masking_Service/Managing_Rule_Sets/" title="Managing Rule Sets" class="md-nav__link">
      Managing Rule Sets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_Data_to_Masking_Service/Managing_File_Formats/" title="Managing File Formats" class="md-nav__link">
      Managing File Formats
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Connecting_Data_to_Masking_Service/Managing_Inventories/" title="Managing Inventories" class="md-nav__link">
      Managing Inventories
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Identifying Sensitive Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Identifying Sensitive Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Discovering_Your_Sensitive_Data_-_Intro/" title="Discovering Your Sensitive Data" class="md-nav__link">
      Discovering Your Sensitive Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Out_of_the_Box_Profiling_Settings/" title="Out of the Box Profiling Settings" class="md-nav__link">
      Out of the Box Profiling Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Managing_Domains/" title="Managing Domains" class="md-nav__link">
      Managing Domains
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Configuring_Profiling_Settings/" title="Configuring Profiling Settings" class="md-nav__link">
      Configuring Profiling Settings
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Creating_A_Profiling_Job/" title="Creating A Profiling Job" class="md-nav__link">
      Creating A Profiling Job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Running_A_Profiling_Job/" title="Running A Profiling Job" class="md-nav__link">
      Running A Profiling Job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Identifying_Sensitive_Data/Reporting_Profiling_Results/" title="Reporting Profiling Results" class="md-nav__link">
      Reporting Profiling Results
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Securing Sensitive Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Securing Sensitive Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Out_Of_The_Box_Algorithm_Frameworks/" title="Out Of The Box Algorithm Frameworks" class="md-nav__link">
      Out Of The Box Algorithm Frameworks
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Configuring_Your_Own_Algorithms/" title="Configuring Your Own Algorithms" class="md-nav__link">
      Configuring Your Own Algorithms
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Creating_Masking_Job/" title="Creating Masking Job" class="md-nav__link">
      Creating Masking Job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Provision_Masked_VDBs/" title="Provision Masked VDBs" class="md-nav__link">
      Provision Masked VDBs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Monitoring_Masking_Job/" title="Monitoring Masking Job" class="md-nav__link">
      Monitoring Masking Job
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Securing_Sensitive_Data/Masking_Job_Wizard/" title="Masking Job Wizard" class="md-nav__link">
      Masking Job Wizard
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      Managing Multiple Engines for Masking
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Managing Multiple Engines for Masking
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Working_with_Multiple_Masking_Engines/" title="Working with Multiple Masking Engines" class="md-nav__link">
      Working with Multiple Masking Engines
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Masking_API_Call_Concepts/" title="Masking API Call Concepts" class="md-nav__link">
      Masking API Call Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Endpoints/" title="Endpoints" class="md-nav__link">
      Endpoints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Key_Management/" title="Key Management" class="md-nav__link">
      Key Management
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Algorithm_Syncability/" title="Algorithm Syncability" class="md-nav__link">
      Algorithm Syncability
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Changes_from_Version_1/" title="Changes from Version 1" class="md-nav__link">
      Changes from Version 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Managing_Multiple_Engines_for_Masking/Example_User_Workflow/" title="Example User Workflow" class="md-nav__link">
      Example User Workflow
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9">
    
    <label class="md-nav__link" for="nav-9">
      Delphix Masking APIs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        Delphix Masking APIs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-1" type="checkbox" id="nav-9-1">
    
    <label class="md-nav__link" for="nav-9-1">
      Masking Client
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-1">
        Masking Client
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/Masking_API_Client/" title="Masking API Client" class="md-nav__link">
      Masking API Client
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/API_Calls_for_Creating_an_Inventory/" title="API Calls for Creating an Inventory" class="md-nav__link">
      API Calls for Creating an Inventory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/API_Calls_for_Creating_and_Running_Masking_Jobs/" title="API Calls for Creating and Running Masking Jobs" class="md-nav__link">
      API Calls for Creating and Running Masking Jobs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/API_Calls_Involving_File_Upload_and_Download/" title="API Calls Involving File Upload and Download" class="md-nav__link">
      API Calls Involving File Upload and Download
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/Backwards_Compatibility_API_Usage/" title="Backwards Compatibility API Usage" class="md-nav__link">
      Backwards Compatibility API Usage
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/Incubating_API_Endpoints/" title="Incubating API Endpoints" class="md-nav__link">
      Incubating API Endpoints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/Masking_Client/Algorithm_Extensions/" title="Algorithm Extensions" class="md-nav__link">
      Algorithm Extensions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9-2" type="checkbox" id="nav-9-2">
    
    <label class="md-nav__link" for="nav-9-2">
      API Examples
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-9-2">
        API Examples
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/loginCredentials/" title="loginCredentials" class="md-nav__link">
      loginCredentials
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/helpers/" title="helpers" class="md-nav__link">
      helpers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/apiHostInfo/" title="apiHostInfo" class="md-nav__link">
      apiHostInfo
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/createApplication/" title="createApplication" class="md-nav__link">
      createApplication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/createEnvironment/" title="createEnvironment" class="md-nav__link">
      createEnvironment
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/createInventory/" title="createInventory" class="md-nav__link">
      createInventory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/create_DatabaseConnector/" title="create DatabaseConnector" class="md-nav__link">
      create DatabaseConnector
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/create_DatabaseRuleset/" title="create DatabaseRuleset" class="md-nav__link">
      create DatabaseRuleset
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/getAuditLogs/" title="getAuditLogs" class="md-nav__link">
      getAuditLogs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/getSyncableObjects/" title="getSyncableObjects" class="md-nav__link">
      getSyncableObjects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../Delphix_Masking_APIs/API_Examples/getSyncableObjectsExport/" title="getSyncableObjectsExport" class="md-nav__link">
      getSyncableObjectsExport
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
  <hr />
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    Previous Releases
  </label>
  <ul class="md-nav__list" data-md-scrollfix>
    <li class="md-nav__item">
      <a href="https://docs.delphix.com/docs51/delphix-masking/masking-engine" title="Delphix Masking 5.1" target="_blank" class="md-nav__link">
        Masking 5.1
      </a>
    </li>
    <li class="md-nav__item">
      <a href="https://docs.delphix.com/docs525/delphix-masking/delphix-masking-engine" title="Delphix Masking 5.2" target="_blank" class="md-nav__link">
        Masking 5.2
      </a>
    </li>
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" title="Introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#terminology" title="Terminology" class="md-nav__link">
    Terminology
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-kerberos-on-the-appliance" title="Configuring Kerberos on the Appliance" class="md-nav__link">
    Configuring Kerberos on the Appliance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-maskings-database-connectors-using-kerberos" title="Creating Maskings Database Connectors using Kerberos" class="md-nav__link">
    Creating Maskings Database Connectors using Kerberos
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-database-configurations" title="Reference Database Configurations" class="md-nav__link">
    Reference Database Configurations
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oracle-database" title="Oracle Database" class="md-nav__link">
    Oracle Database
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ms-sql-server" title="MS SQL Server" class="md-nav__link">
    MS SQL Server
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sybase" title="Sybase" class="md-nav__link">
    Sybase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="kerberos-configuration">Kerberos Configuration<a class="headerlink" href="#kerberos-configuration" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>As of 5.3.0.0, the Delphix Masking Engine supports Kerberos authentication for
Oracle, MS SQL Server, and Sybase connections. Utilizing this service requires
the presence of a Kerberos Key Distribution Center (KDC) server as well as
additional configuration actions to be done on both the the Masking Engine and
the database. This document presents configuration instructions for enabling
and using Kerberos on the Delphix Masking Engine, as well as reference
configurations for enabling Kerberos on the Databases. Although other
configurations are possible, the configurations in this document have been
validated by Delphix.</p>
<h2 id="terminology">Terminology<a class="headerlink" href="#terminology" title="Permanent link">&para;</a></h2>
<p>Throughout this document, the following example values are used. To recreate
these reference environments, these values must be replaced with real values
appropriate for your network environment:</p>
<ul>
<li>.bar.com - the DNS domain of then network</li>
<li>BAR.COM - the Kerberos domain</li>
<li>me-host - the hostname of the masking engine</li>
<li>foo-kcd - the hostname KDC server</li>
<li>krbuser - the kerberos principal to be granted access to the database for masking</li>
</ul>
<h2 id="configuring-kerberos-on-the-appliance">Configuring Kerberos on the Appliance<a class="headerlink" href="#configuring-kerberos-on-the-appliance" title="Permanent link">&para;</a></h2>
<p>This section details the steps required to configure Kerberos on your appliance.</p>
<p><strong>Step 1</strong> On the Delphix System Setup CLI, enable the Kerberos feature.</p>
<p><strong>Note</strong>
You may see a warning indicating that special permission is required to enable Kerberos.
This warning can be ignored when enabling Kerberos for use with Masking only.
In the following examples, <code>me-hosts</code> is the hostname of your masking engine.</p>
<div class="codehilite"><pre><span></span>$ ssh sysadmin@me-host.bar.com
me-host&gt; system
me-host system&gt; enableFeatureFlag
me-host system enableFeatureFlag *&gt; set name=KERBEROS
me-host system enableFeatureFlag *&gt; commit
me-host system&gt; exit
</pre></div>


<p><strong>Step 2</strong> On the Delphix System Setup CLI, configure and enable Kerberos.</p>
<div class="codehilite"><pre><span></span>$ ssh sysadmin@me-host.bar.com
me-host service&gt; kerberos
me-host service kerberos&gt; update
me-host service kerberos update *&gt; set name=Kerberos_Conf
me-host service kerberos update *&gt; edit kdcs
me-host service kerberos update kdcs *&gt; edit 0
me-host service kerberos update kdcs 0 *&gt; set hostname=foo-kcd.bar.com
me-host service kerberos update kdcs *&gt; back
me-host service kerberos update *&gt; set realm=BAR.COM
me-host service kerberos update *&gt; set principal=krbuser
me-host service kerberos update *&gt; set keytab=_krbuser_keytab_base64_
me-host service kerberos update *&gt; commit
</pre></div>


<p>In this case, <strong><em>krbuser_keytab_base64</em></strong> is the base64 encoded contents of the
 keytab file for krbuser. The kerberos keytab for a user is typically available
from your kerberos administrator.</p>
<p>To display a keytab file in base64 encoding use:</p>
<p><code>$ base64 ~/krbuser.keytab</code></p>
<p><strong>Step 2</strong> Alternatively - On the Delphix Server Setup UI configure and enable
Kerberos:</p>
<p>a. From the Preferences menu select Kerberos Configuration.</p>
<p><img alt="" src="../media/kerberos_config.png" /></p>
<p>b. Add record(s) for your KDCs, and populate other fields appropriately for your
   network environment. Upon pressing <strong>Save</strong>, your configuration will be tested.
   If the engine is able to authenticate to the KDC with the supplied
   configuration, the configuration is applied immediately.</p>
<p><img alt="" src="../media/kerberos_save.png" /></p>
<h2 id="creating-maskings-database-connectors-using-kerberos">Creating Maskings Database Connectors using Kerberos<a class="headerlink" href="#creating-maskings-database-connectors-using-kerberos" title="Permanent link">&para;</a></h2>
<p>Once the Delphix Appliance is configured for Kerberos, creating Connectors
using Kerberos authentication is simple:</p>
<p><img alt="" src="../media/create_connection.png" /></p>
<p>Assuming you are using the same user principal configured in Server Setup, the
keytab will be used and it is unnecessary to enter a password in the Connector
definition.</p>
<p>For Sybase database Connectors, it is necessary to supply the service principal
name as an additional configuration item. For Oracle DB, this value is
determined automatically.  For MS SQL Server it is determined based on the
reverse DNS mapping of the Server Name (refer to the section on MS SQL
Server below).</p>
<h2 id="reference-database-configurations">Reference Database Configurations<a class="headerlink" href="#reference-database-configurations" title="Permanent link">&para;</a></h2>
<p>The following are a series of reference kerberos configuration procedures and
troubleshooting notes for the supported databases. These are meant to serve as
examples to be further customized according to the user's specific network
environment and security needs.</p>
<h3 id="oracle-database">Oracle Database<a class="headerlink" href="#oracle-database" title="Permanent link">&para;</a></h3>
<p><strong>Overview</strong></p>
<p>This document describes how to set up an Oracle DB instance for kerberized
connections. The following steps are described:</p>
<ul>
<li>Creating a service principal and adding it to the DB system</li>
<li>Configuring the database to use kerberos authentication</li>
<li>Creating DB users identified via kerberos</li>
<li>Troubleshooting tips</li>
</ul>
<p><strong>Prerequisites</strong></p>
<p>This document assumes you already have a kerberized network environment with
an MIT Kerberos KDC. These procedures have been tested successfully with Oracle
database versions 11.2.0.2, 11.2.0.4 and 12.2.1. Oracle database version
12.1.0.1 did not work in our testing.</p>
<p>You will need the following from your kerberos environment:</p>
<ul>
<li>The krb5.conf file</li>
<li>A user principal and associated password or keytab you'd like to use to log
  into the database</li>
<li>The ability to create a service principal for the Oracle DB and retrieve the associated keytab</li>
</ul>
<p>This section of the document uses these example values in addition to those
mentioned above:</p>
<ul>
<li>The oracle database is: ora-db.bar.com.</li>
<li>The oracle service name is: oracle</li>
</ul>
<p><strong>Creating the Oracle Service Principal</strong></p>
<p>The service principal will be named: <service_name>/<hostname>@<domain></p>
<p>Given our default values above, this works out to: oracle/ora-db@bar.com</p>
<p>Notice that the hostname is whatever the database system thinks its hostname
is - that is, the output of "uname -n" on the database system, rather than the
actual DNS name of the database system. Typically, these values would be the
same, but this is not always the case.</p>
<p>On the KDC, run:</p>
<div class="codehilite"><pre><span></span># kadmin.local
kadmin.local: addprinc -randkey oracle/ora-db@bar.com
kadmin.local: ktadd -norandkey -k /var/tmp/ora-db.keytab oracle/ora-db@bar.com
</pre></div>


<p>Copy the resulting keytab file (/var/tmp/ora-db.keytab) to the Oracle DB system
at this location:  /etc/v5srvtab</p>
<p>As root on the Oracle DB system, ensure that the keytab has the correct
permissions:</p>
<div class="codehilite"><pre><span></span># chown root:oinstall /etc/v5srvtab
# chmod 440 /etc/v5srvtab
</pre></div>


<p>Finally, this is a good opportunity to copy /etc/krb5.conf from the KDC to
/etc/krb5.conf on the Oracle DB system. This file should be readable by all users.</p>
<p><strong>Configuring the Oracle Database for Kerberos</strong></p>
<p>Log into the Oracle DB system as the appropriate use for the database in question.</p>
<div class="codehilite"><pre><span></span>$ cd $ORACLE_HOME
$ vi network/admin/sqlnet.ora
</pre></div>


<p>Add the following for Oracle 11:</p>
<div class="codehilite"><pre><span></span>SQLNET.KERBEROS5_CONF=/etc/krb5.conf
SQLNET.AUTHENTICATION_SERVICES=(BEQ,KERBEROS5)
SQLNET.KERBEROS5_CONF_MIT=true
SQLNET.AUTHENTICATION_KERBEROS5_SERVICE=oracle
</pre></div>


<p>Or the following for Oracle 12:</p>
<div class="codehilite"><pre><span></span>NAMES.DIRECTORY_PATH=(TNSNAMES, EZCONNECT, HOSTNAME)
SQLNET.KERBEROS5_CONF=/etc/krb5.conf
SQLNET.AUTHENTICATION_SERVICES=(BEQ,KERBEROS5PRE,KERBEROS5)
SQLNET.KERBEROS5_CONF_MIT=true
SQLNET.AUTHENTICATION_KERBEROS5_SERVICE=oracle
</pre></div>


<p>If the database is Oracle 11 (not necessary on Oracle 12):</p>
<p><code>$ vi dbs/init.ora</code></p>
<p>Add this line at the end: <code>OS_AUTHENT_PREFIX=""</code></p>
<p><strong>Creating a DB User Identified via Kerberos</strong></p>
<p>Log into the Oracle DB system as the appropriate database user and open a
database session as the DBA:</p>
<p><code>$ sqlplus / as sysdba</code></p>
<p>On Oracle 12, you may wish to alter your session to create the user in one of
the PDBs:</p>
<p><code>SQL&gt; alter session set container=MYPDB;</code></p>
<p>Create the user that will connect to the DB using kerberos:</p>
<p><code>SQL&gt; create user krbdbuser identified externally as 'krbuser@BAR.COM';</code></p>
<p>Grant the user privileges necessary for masking.</p>
<p>This example grants all privileges for the sake of simplicity:</p>
<p>Oracle 11:</p>
<p><code>SQL&gt; grant all privilege to krbdbuser;</code></p>
<p>Oracle 12: (Customize permissions as necessary for your environment).</p>
<div class="codehilite"><pre><span></span>SQL&gt; grant connect,resource to krbdbuser;
SQL&gt; grant create tablespace, drop tablespace to krbdbuser;
SQL&gt; grant create table to krbdbuser;
SQL&gt; grant create sequence to krbdbuser;
SQL&gt; grant select_catalog_role to krbdbuser;
SQL&gt; grant unlimited tablespace to krbdbuser;
SQL&gt; grant select_catalog_role to krbdbuser;
SQL&gt; grant alter system to krbdbuser;
SQL&gt; grant sysoper to krbdbuser;
SQL&gt; grant dba to krbdbuser;
</pre></div>


<p><strong>Troubleshooting Tips</strong></p>
<ul>
<li>Connecting via JDBC with kerberos authentication from Delphix Masking involves two steps: a kerberos login, followed by JDBC connect. A failure stack with an error in the login function indicates a misconfiguration on either the engine or KDC - the engine hasn't even attempted to communicate with the database at that point. Failure stacks are saved in the debugging log for masking.</li>
<li>Login exceptions that mention a checksum error mean either the password or keytab supplied doesn't match the expected password/key on the KDC for the principal you're trying to use. Server Setup verifies that your keytab works at configuration time, but it could stop working if the key for your principal is updated on the KDC.</li>
<li>Prior to version 12, Oracle databases instances assume they can create/write a particular temporary file to store kerberos credentials for the DB. This means if you attempt to run multiple kerberized instances of Oracle 11 on the same system or VM, and the databases run as different system users, the first Oracle instance that performs kerberos auth will create and own this file. Kerberos authentication will fail to function on all other instances.</li>
</ul>
<h3 id="ms-sql-server">MS SQL Server<a class="headerlink" href="#ms-sql-server" title="Permanent link">&para;</a></h3>
<p><strong>Overview</strong></p>
<p>This is an overview of the step necessary to get your masking engine talking to
a MS SQL Server database using kerberos authentication. Since Active Directory
already uses Kerberos for authentication, little or no additional configuration
is need on the MS SQL Database server.</p>
<p>The following steps are described in this section:</p>
<ul>
<li>Create the necessary SPNs (Service Principal Names) for your MSSQL Database service in AD</li>
<li>Create the DB Connector on the masking engine</li>
<li>Creating a keytab for an AD User</li>
<li>Troubleshooting tips</li>
</ul>
<p><strong>Prerequisites</strong></p>
<p>Configuring cross-realm trust between Active Directory and an MIT KDC Server is
a complex topic, and will not be described here. In the absence of such a setup,
it is possible to make the Delphix Appliance a kerberos client of the Active
Directory (AD) Server. In this configuration, no additional KDC in necessary.
The example below assumes this kind of configuration.</p>
<p>This section of the document uses these example values in addition to or instead
of those mentioned above:</p>
<ul>
<li>The MSSQL server database is named mssql-db.bar.com.</li>
<li>The AD user configured for masking access to the MSSQL database is aduser (rather than krbuser in other examples elsewhere in this document).</li>
<li>The AD user that start the MS SQL Server service on the DB Server is dbuser.</li>
</ul>
<p><strong>Creating SPNs for the Database Service</strong></p>
<p>MS SQL Server service will typically register several SPNs with AD upon startup.
However, there are several conditions which can cause these SPNs to not be
registered successfully, or to be registered with service names other than those
that are expected by the jTDS JDBC driver employed by Delphix Masking.</p>
<p>The service principal name for an MS SQL Server expected by Delphix Masking is: MSSQLSvc/<FQDN>:<PORT></p>
<p>For example, the SPN for our example MS SQL Server would be:</p>
<p><code>MSSQLSvc/mssql-db.bar.com:1433</code></p>
<p>In addition, it is <strong>required</strong> that a reverse mapping exist in DNS from the IP
address of the MS SQL Server system to the FQDN registered.</p>
<p>The following commands may be run in powershell on the MS SQL Server to assist
in debugging SPN related issues:</p>
<p>List all SPNs for dbuser:</p>
<p><code>setspn -L -U dbuser</code></p>
<p>Deleting an old SPN associated with dbuser:</p>
<p><code>setspn -U -D MSSQLSvc/other-server.ad.bar.com:SQL2008R2 dbuser</code></p>
<p>Here's how to create the SPN describe above:</p>
<p><code>setspn -U -S MSSQLSvc/mssql-db.bar.com:1433 dbuser</code></p>
<p><strong>Creating the Database Connector on the Masking Engine</strong></p>
<p>Once the above steps are complete, creating the database connector can be
performed using the procedure above. Enter the username and optionally, password
of the AD user in the Connector definition. Be sure that the AD user has the
sufficient access to the MS SQL Database for masking.</p>
<p>The password field can be left blank when creating the connector if the user
is the same user configured in Server Setup for the appliance. Since keytabs
are not typically used in an AD environment, it may be useful to create one
manually, to avoid having a password in the DB Connector.</p>
<p><strong>Creating a keytab file for an AD user</strong></p>
<p>On a unix or MAC system with MIT kerberos CLI utilities installed:</p>
<div class="codehilite"><pre><span></span># ktutil
ktutil: addent -password -p krbuser -k 1 -e arcfour-hmac
&lt;type password for krbuser&gt;
ktutil: addent -password -p krbuser -k 1 -e aes128-cts-hmac-sha1-96
&lt;type password for krbuser&gt;
ktutil: addent -password -p krbuser -k 1 -e aes256-cts-hmac-sha1-96
&lt;type password for krbuser&gt;
ktutil: write_kt /var/tmp/krbuser.keytab
ktutil: exit
# base64 /var/tmp/krbuser.keytab ;# This is string to user for keytab in Server Setup kerberos configuration
</pre></div>


<div class="admonition note">
<p class="admonition-title">Note</p>
<p>kvno doesn't matter when using kerberos keytabs with AD. The password must match the active password for the AD user in question.</p>
</div>
<p><strong>Troubleshooting Tips</strong></p>
<p>The client uses the incorrect service name
This will typically manifest an exception mentioning cred, like:</p>
<div class="codehilite"><pre><span></span>Caused by: org.ietf.jgss.GSSException: No valid credentials provided (Mechanism level: Fail to create credential. (63) - No service creds)
  at sun.security.jgss.krb5.Krb5Context.initSecContext(Krb5Context.java:770)
  at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:248)
  at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:179)
  at com.microsoft.sqlserver.jdbc.KerbAuthentication.intAuthHandShake(KerbAuthentication.java:163)
        ... 101 common frames omitted
Caused by: sun.security.krb5.internal.KrbApErrException: Fail to create credential. (63) - No service creds
  at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(CredentialsUtil.java:162)
  at sun.security.krb5.Credentials.acquireServiceCreds(Credentials.java:458)
   at sun.security.jgss.krb5.Krb5Context.initSecContext(Krb5Context.java:693)
        ... 104 common frames omitted
</pre></div>


<p>Why might this happen:</p>
<ul>
<li>
<p>You're using the JTDS JDBC driver, and your MSSQL Server's IP address doesn't
 have a reverse mapping in DNS. In this case, the driver may construct a service
 name like: MSSQLSvc/<IP>:<PORT> and try to use that.  Either correct DNS to have a valid reverse mapping for the IP of your SQL server, or manually add an SPN to active directory for the name the JDBC client is trying to use:</p>
<ul>
<li>Determine the user that starts MSSQL Server on your DB machine.</li>
<li>
<p>From powershell, do: setspn -AU MSSQLSvc/<IP>:1433 <USER></p>
<p>Example: setspn -AU MSSQLSvc/10.43.100.101:1433 AD\dbuser</p>
</li>
</ul>
</li>
<li>
<p>The database server has multiple DNS names (FQDNs). In this case, SPNs may be
registered only for some of them. It may be necessary to add SPNs for the other
FQDNs as above.</p>
</li>
<li>The MS SQL Server didn't automatically register an SPN. There is a limit (in
the thousands) to the number of SPNs that may be registered for a given AD user.
It is quite possible to hit this limit in an environment where many MS SQL Server
VMs are actively created and destroyed with the same configuration.</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In Active Directory, setspn isn't creating a service principal with distinct key as is typical for services on MIT KDCs - rather it's mapping the service principal to the key for the AD user in question.</p>
</div>
<p><strong>The SPN for the SQL Server is registered to the incorrect AD account</strong></p>
<p>Manifests as an exception with this text:  GSS failure: Defective token detected
(Mechanism level: AP_REP token id does not match!)</p>
<p>Resolution: From powershell on the MS SQL Server:</p>
<p><code>PS&gt; setspn -Q &lt;SPN&gt;</code></p>
<p>This will show what user has the SPN registered.</p>
<p><code>PS&gt; setspn -U -D &lt;SPN&gt; &lt;WRONG_ACCT&gt;</code></p>
<p>This will unregister the SPN from that user</p>
<p><code>PS&gt; setspn -AU &lt;SPN&gt; &lt;CORRECT_ACCT&gt;</code></p>
<h3 id="sybase">Sybase<a class="headerlink" href="#sybase" title="Permanent link">&para;</a></h3>
<p><strong>Creating a principal and corresponding keytab on the KDC</strong></p>
<ol>
<li>SSH into the KDC as the user with sufficient privileges to run kadmin.local</li>
<li>Run the kerberos configuration CLI with kadmin.local</li>
<li>
<p>Add a new principal you want to authenticate as later with:
   <code>add_principal &lt;principalName&gt;</code></p>
<p>We’re going to continue to use <strong>krbuser</strong> as our example kerberos principal.</p>
</li>
<li>
<p>Once you’ve created the principal and provided it a password, we need to
generate a keytab for it. Do so via the following command:</p>
<p><code>ktadd -norandkey -k v5srvtab krbuser</code></p>
<p>In this case, v5srvtab is the keytab filename, and it will be placed into whatever directory you’ve invoked kadmin.local from. Presumably this will be the home directory of the machine.</p>
</li>
<li>
<p>You now have everything you need done on the KDC, but you will need your
keytab file later as well as the <strong>krb5.conf</strong> file that is located in the home
directory of the KDC, so consider moving them somewhere (probably your local
machine) that will be convenient for you to access later.</p>
</li>
</ol>
<p><strong>Configuring the Sybase image for Kerberos</strong></p>
<ol>
<li>Start up a Sybase database.<ul>
<li><strong>Note</strong>: Each sybase database machine may have multiple sybase instances running on it at a given point in time. In this case, I am configuring the ASE_1550_S5 instance, but these steps can be done on any instance so long as you change the $SYBASE_HOME directories accordingly.</li>
</ul>
</li>
<li>
<p>Connect to the particular sybase instance you are working on and invoke the
following sql statement:</p>
<p><code>sp_configure ‘use security services’, 1</code></p>
</li>
<li>
<p>Continue to create a user with the same name as the principal name you created previously on the KDC, in this case <strong>krbuser</strong>:</p>
<p><code>sp_addlogin krbuser, &lt;password&gt;</code></p>
</li>
<li>
<p>Change your <strong>$SYBASE</strong> environment variable to point to the sybase directory
for whichever instance you are configuring. In this case, we want to do:</p>
<p><code>export SYBASE=/opt/sybase/15-5</code></p>
</li>
<li>
<p>Open the <strong>$SYBASE/interfaces file</strong>, and find the header for whichever Sybase instance you are configuring. In our case, it is <strong>ASE_1550_S5</strong>. You should see something that looks like this:</p>
<div class="codehilite"><pre><span></span>ASE1550_S5
master tcp ether 10.43.89.241 5500
master tcp ether localhost 5500
query tcp ether 10.43.89.241 5500
query tcp ether localhost 5500
</pre></div>


<p>You want to add the following line to this:</p>
<p><code>secmech 1.3.6.1.4.1.897.4.6.6</code></p>
<p>This line is static, while the other lines in this section are dynamically generated for your instance. So, your final result should look something like this:</p>
<div class="codehilite"><pre><span></span>ASE1550_S5
master tcp ether 10.43.89.241 5500 **&lt; your numbers will vary**
master tcp ether localhost 5500 **&lt; your numbers will vary**
query tcp ether 10.43.89.241 5500 **&lt; your numbers will vary**
query tcp ether localhost 5500 **&lt; your numbers will vary**
</pre></div>


</li>
<li>
<p>Navigate to <strong>$SYBASE/OCS-15_0/config</strong>. You should see <strong>libtcl64.cfg</strong> and
<strong>libtcl.cfg</strong></p>
<p>a. Change the contents of <strong>libtcl64.cfg</strong> to be this:</p>
<div class="codehilite"><pre><span></span>[DIRECTORY]
;ldap=libsybdldap.so ldap://ldaphost/dc=sybase,dc=com
[SECURITY]
csfkrb5=libsybskrb64.so secbase=@bar.com libgss=/lib64/libgssapi_krb5.so.2.2
[FILTERS]
;ssl=libsybfssl.so
</pre></div>


<p>b. Change the contents of <strong>libtcl.cfg</strong> to be this:</p>
<div class="codehilite"><pre><span></span>[DIRECTORY]
;ldap=libsybdldap.so ldap://ldaphost/dc=sybase,dc=com
[SECURITY]
csfkrb5=libsybskrb.so secbase=@bar.com
libgss=/lib64/libgssapi_krb5.so.2.2
[FILTERS]
;ssl=libsybfssl.so
</pre></div>


<p>c. <strong>Note</strong> that the @bar.com value is our realm name that is determined by the KDC. Realistically, you should never have to deal with this, and it should never change, but if for some reason it does, that value needs to be updated.</p>
</li>
<li>
<p>Create a directory for those Kerberos config files you created on the KDC in
the previous set of steps:</p>
<p><code>sudo mkdir /krb</code></p>
<p>Copy into /krb your keytab file <strong>v5srvtab</strong> and config file <strong>krb5.conf</strong> that you took off of the KDC earlier.</p>
</li>
<li>
<p>Head to <strong>$SYBASE/ASE-15_0/install</strong> and open the <strong>RUN_ASE1550_S5</strong> file.
We’re going to add information so that Sybase knows where to find our
keytab and our krb5.conf file, so change the content to look like this:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/sh</span>
<span class="c1">#</span>
<span class="c1"># ASE page size (KB) :    4096</span>
<span class="c1"># Master device path:   /opt/sybase/devices/data5/S5_master.dat</span>
<span class="c1"># Error log path:       /opt/sybase/errorlogs/ASE1550_S5.log</span>
<span class="c1"># Configuration file path:      /opt/sybase/15-5/ASE-15_0/ASE1550_S5.cfg</span>
<span class="c1"># Directory for shared memory files:    /opt/sybase/15-5/ASE-15_0</span>
<span class="c1"># Adaptive Server name: ASE1550_S5</span>
<span class="c1">#</span>
<span class="nb">export</span> **KRB5_KTNAME**<span class="o">=</span>/krb/v5srvtab
<span class="nb">export</span> **KRB5_CONFIG**<span class="o">=</span>/krb/krb5.conf
/opt/sybase/15-5/ASE-15_0/bin/dataserver <span class="se">\</span>
-kASE1550_S5@bar.com <span class="se">\</span>
-d/opt/sybase/devices/data5/S5_master.dat <span class="se">\</span>
-e/opt/sybase/errorlogs/ASE1550_S5.log <span class="se">\</span>
-c/opt/sybase/15-5/ASE-15_0/ASE1550_S5.cfg <span class="se">\</span>
-M/opt/sybase/15-5/ASE-15_0 <span class="se">\</span>
-sASE1550_S5
</pre></div>
</td></tr></table>

</li>
<li>
<p>Reboot the Sybase instance you’re working so that it reads in all of these
config changes.</p>
</li>
<li>
<p>Connect to the Sybase instance as the <strong>dbo</strong> user so that you may give dbo
privileges to your kerberos authentication login on a particular database within
the instance. Below is an example of doing so with the database <strong>potatoes</strong>:</p>
<div class="codehilite"><pre><span></span>&gt;&gt; sql5
1&gt; use potatoes
2&gt; go
1&gt; sp_addalias instructions, dbo
2&gt; go
Alias user added.
(return status = 0)
</pre></div>


</li>
<li>
<p>Now, to access the Sybase instance via kerberos and confirm success, you
can do the following set of commands (I put these three lines into a script
called <strong>connect.sh</strong> for future convenience):</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="ch">#!/bin/sh</span>
kinit -k -t /krb/v5srvtab &lt;yourPrincipalName&gt;
<span class="nb">export</span> <span class="nv">SYBASE</span><span class="o">=</span><span class="s1">&#39;/opt/sybase/15-5&#39;</span>
/opt/sybase/15-5/OCS-15_0/bin/isql64 -V -SASE1550_S5
</pre></div>
</td></tr></table>

</li>
</ol>
<p><strong>Testing by creating a Kerberos Connector on the Delphix Engine</strong></p>
<ol>
<li>
<p>Start by configuring your engine for kerberos. SSH into the engine as the
delphix user and run the following command:</p>
<p><code>/opt/delphix/server/bin/jmxtool tunable set enabled_features KERBEROS true</code></p>
</li>
<li>
<p>Log into the virtualization engine and proceed through first-time setup if
  you need to.</p>
</li>
<li>
<p>Once first-time setup is complete, log into the Delphix Setup page, proceed
to Preferences &gt; Kerberos Configuration. Add the information for your KDC to
configure it with the principal name you created earlier, <strong>krbuser</strong>. You can get the keytab by running the following command on your keytab file:</p>
<p><code>base64 v5srvtab</code></p>
<p>Copy the output as plaintext into the keytab field of the kerberos configuration box.</p>
</li>
<li>
<p>Finally, create a Sybase connector with parameters that look like this, and if your “test connection” attempt succeeds you’re all set!</p>
<p><img alt="" src="../media/kerberos_connection.png" /></p>
</li>
</ol>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../Definitions_-_Terms_and_Meanings/" title="Delphix Masking Terminology" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Delphix Masking Terminology
              </span>
            </div>
          </a>
        
        
          <a href="../Audit_Logs/" title="Audit Logs" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Audit Logs
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 Delphix Corp.
          </div>
        
      </div>
      
        
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../assets/fonts/font-awesome.css">
    
      <a href="https://www.delphix.com/" class="md-footer-social__link fa fa-sitemap"></a>
    
      <a href="https://www.facebook.com/DelphixCorp/" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/delphix" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/delphix" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://github.com/delphix" class="md-footer-social__link fa fa-github"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.878fdd8d.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-35429885-3","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>