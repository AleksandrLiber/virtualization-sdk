---
title: Virtualization SDK
---

# Plugin Operations

## Repository Discovery

Discovers the set of [repositories](Gloassary.md#repository) for a plugin on an [environment](Glossary.md#environment). For a DBMS, this can correspond to the set of binaries installed on a Unix host.

```python
from dlpx.virtualization import platform
from dlpx.virtualization.generated import RepositoryDefinition

plugin = platform.plugin()

@plugin.discovery.repository()
def repository_discovery(source_connection):  
  repository = RepositoryDefinition()
  repository.installPath = "/usr/bin/install"
  repository.version = "1.2.3"
  return [repository]
```

> The above command assumes a [Repository Schema](Schemas_and_Autogenerated_Classes.md#repositorydefinition-schema) defined as:

```json
{
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "installPath": { "type": "string" },
    "version": { "type": "string" }
  },
  "identityFields": ["installPath"],
  "nameField": ["installPath"]    
}
```

### Signature

`def repository_discovery(source_connection)`

### Arguments

Parameter | Description
--------- | -----------
source_connection | Instance of the [SourceConnection](Classes.md#sourceconnection) class.

### Returns
An array of [RepositoryDefinition](Schemas_and_Autogenerated_Classes.md#repositorydefinition) objects.

## Source Config Discovery

Discovers the set of [source configs](Gloassary.md#source-config) for a plugin for a [repository](Glossary.md#repository). For a DBMS, this can correspond to the set of unique databases running using a particular installation on a Unix host.

```python
from dlpx.virtualization import platform
from dlpx.virtualization.generated import SourceConfigDefinition

plugin = platform.plugin()

@plugin.discovery.source_config()
def source_config_discovery(source_connection, repository):
  source_config = SourceConfigDefinition()
  source_config.name = "my_name"
  source_config.port = 10000
  return [source_config]
```

> The above command assumes a [Source Config Schema](Schemas_and_Autogenerated_Classes.md#sourceconfigdefinition-schema) defined as:

```json
{
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "name": { "type": "string" },
    "port": { "type": "number" }
  },
  "identityFields": ["name"],
  "nameField": ["name"]    
}
```

### Signature

`def source_config_discovery(source_connection)`

### Arguments

Parameter | Description
--------- | -----------
source_connection | Instance of the [SourceConnection](Classes.md#sourceconnection) class.
repository | Instance of the [Repository](Schemas_and_Autogenerated_Classes.md#repositorydefinition-class) class.

### Returns
An array of [SourceConfigDefinition](Schemas_and_Autogenerated_Classes.md#sourceconfigdefinition) objects.

## Direct Linked Soure Pre-Snapshot



## Direct Linked Soure Post-Snapshot

## Staged Linked Soure Pre-Snapshot

## Staged Linked Soure Post-Snapshot

## Staged Linked Soure Start-Staging

## Staged Linked Soure Stop-Staging

## Staged Linked Soure Status

## Staged Linked Soure Worker

## Staged Linked Soure Mount Specification

## Virtual Source Configure

Configures the data in a particular snapshot to be usable on a target environment. For database data files, this may mean recovering from a crash consistent format or backup. For application files, this may mean reconfiguring XML files or rewriting hostnames and symlinks.
Required to implement for Delphix Engine operations:

* [Provision](https://docs.google.com/document/d/1uUUiSKtPKyzJYXjeh4s49MZ_mXPiOh_mbSqqmw1m59M/edit#heading=h.cmmq92gwqotb)
* Refresh


```python
from dlpx.virtualization import platform
from dlpx.virtualization.generated import SourceConfigDefinition

plugin = platform.plugin()

@plugin.virtual.configure()
def configure(virtual_source, repository, snapshot):
  name = "config_name"
  source_config = SourceConfigDefinition()
  source_config.name = name
  return source_config
```

> The above command assumes a [SourceConfig Schema](Schemas_and_Autogenerated_Classes.md#sourceconfig-schema) defined as:

```json
{
  "type": "object",
  "required": ["name"],
  "additionalProperties": false,
  "properties": {
    "name": { "type": "string" }
  },
  "identityFields": ["name"],
  "nameField": ["name"] 
}
```

### Signature

`def configure(virtual_source, snapshot, repository)`

### Arguments

Parameter | Description
--------- | -----------
source | Instance of the [VirtualSource](Classes.md#virtualsource) class.
snapshot | Instance of the Snapshot class.
repository | Instance of the Repository class.

### Returns
[SourceConfigDefinition](Schemas_and_Autogenerated_Classes.md#sourceconfigdefinition)

## Virtual Source Unconfigure

## Virtual Source Reconfigure

## Virtual Soure Start

Executed whenever the data should be placed in a "running" state.
Required to implement for Delphix Engine operations:

* Start

```python
from dlpx.virtualization import platform

plugin = platform.plugin()

@plugin.virtual.start()
def start(virtual_source, repository, source_config):
  name = source_config.name
  return
```

> The above command assumes a [SourceConfig Schema](Schemas_and_Autogenerated_Classes.md#sourceconfig-schema) defined as:

```json
{
  "type": "object",
  "required": ["name"],
  "additionalProperties": false,
  "properties": {
    "name": { "type": "string" }
  },
  "identityFields": ["name"],
  "nameField": ["name"] 
}
```

### Signature

`def start(virtual_source, repository, source_config)`

### Arguments

Parameter | Description
--------- | -----------
source | Instance of the [VirtualSource](Classes.md#virtualsource) class.
repository | Instance of the Repository class.
source_config | Instance of the [SourceConfigDefinition](Schemas_and_Autogenerated_Classes.md#sourceconfigdefinition) class.

### Returns
None

## Virtual Source Stop

## Virtual Source Pre-Snapshot

## Virtual Source Post-Snapshot

## Virtual Source Mount Specification

## Virtual Source Status