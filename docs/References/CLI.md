# CLI

The CLI is installed with the SDK. To install the SDK, refer to the [Getting Started](../Getting_Started) section.

## Commands

### init
#### Description
Create a plugin in the root directory. The plugin will be valid but have no functionality.

#### Options
|Option|Description|Required|Default|
|------|-----------|--------|:-------:|
|-r, --root-dir DIRECTORY|Set the plugin root directory.|Y|The current working directory.|
|-n, --plugin-name TEXT|Set the name of the plugin that will be used to identify it.|Y|N/A|
|-s, --ingestion-strategy [DIRECT\|STAGED]|Set the ingestion strategy of the plugin. A "direct" plugin ingests without a staging server while a "staged" plugin requires a staging server.|Y|DIRECT|
|--pretty-name TEXT|Set the pretty name of the plugin that will be displayed.|N|N/A|

#### Examples
Create a plugin called `postgres` in the current working directory with the `DIRECT` ingestion strategy.

```
$ dvp init -n postgres
```

Create a plugin called `mongodb` in a custom location with the `STAGED` ingestion strategy and use `MongoDB` as the display name.

```
$ dvp init -n mongodb -s STAGED --pretty-name MongoDB
```

***
### build
#### Description
Build the plugin code and generate upload artifact file using the configuration provided in the plugin config file.

#### Options
|Option|Description|Required|Default|
|------|-----------|--------|:-------:|
|-c, --plugin-config FILE|Set the path to plugin config file.This file contains the configuration required to build the plugin.|Y|plugin_config.yml|
|-a, --upload-artifact FILE|Set the upload artifact.The upload artifact file generated by build process will be written to this file and later used by upload command.|Y|artifact.json|
|-g, --generate-only|Only generate the Python classes from the schema definitions. Do not do a full build or create an upload artifact.|N|False|

#### Examples
Do a full build of the plugin and write the upload artifact to `./artifact.json`.

This assumes current working directory contains a plugin config file named `plugin_config.yml`.

```
$ dvp build
```

Do a partial build and just generate the Python classes from the schema definitions.

This assumes current working directory contains ad plugin config file named `plugin_config.yml`.

```
$ dvp build -g
```

Do a full build of a plugin and write the artifact file to a custom location.

```
$ dvp build -c config.yml -a build/artifact.json
```
***
### upload
#### Description
Upload the generated upload artifact (the plugin JSON file) that was built to a target Delphix Engine. Note that the upload artifact should be the file created after running the build command and will fail if it's not readable or valid.
#### Options
|Option|Description|Required|Default|
|------|-----------|--------|:-------:|
|-e, --delphix-engine TEXT|Upload plugin to the provided engine. This should be either the hostname or IP address.|Y|N/A|
|-u, --user TEXT|Authenticate to the Delphix Engine with the provided user.|Y| N/A|
|-a, --upload-artifact FILE|Path to the upload artifact that was generated through build.|Y| N/A|
|--password TEXT|Authenticate using the provided password. If ommitted, the password will be entered through a secure prompt.|N|N/A|

#### Examples
Upload artifact `build/artifact.json` to `delphix-engine.domain` using the user `admin`. Since the password option is ommitted, a secure password prompt is used instead.

```
$ dvp upload -a build/artifact -e delphix-engine.domain -u admin
Password:
```
## Verbosity

To change the verbosity level of the CLI you can specify up to three `-v` (to increase) or `-q` (to decrease) the amount that is printed to the console.

### Examples
Print a little more to the console.

```
$ dvp -v build
```

Print a little less to the console.

```
$ dvp -q build
```

Print everything to the console.

```
$ dvp -vvv build
```

Print nothing to the console.

```
$ dvp -qqq build
```

## Help
Every command has a `-h` flag including the CLI itself. This will print the help menu.

#### Get the CLI's help menu.

```
$ dvp -h
Usage: dvp [OPTIONS] COMMAND [ARGS]...

  The tools of the Delphix Virtualization SDK that help develop, build, and
  upload a plugin.

Options:
  --version      Show the version and exit.
  -v, --verbose  Enable verbose mode. Can be repeated up to three times for
                 increased verbosity.
  -q, --quiet    Enable quiet mode. Can be repeated up to three times for
                 increased suppression.
  -h, --help     Show this message and exit.

Commands:
  build   Build the plugin code and generate upload artifact file using the...
  init    Create a plugin in the root directory.
  upload  Upload the generated upload artifact (the plugin JSON file) that...
```

####Get the `build` command's help menu.
```
$ dvp build -h
Usage: dvp build [OPTIONS]

  Build the plugin code and generate upload artifact file using the
  configuration provided in the plugin config file.

Options:
  -c, --plugin-config FILE    Set the path to plugin config file.This file
                              contains the configuration required to build the
                              plugin.  [default: plugin_config.yml]
  -a, --upload-artifact FILE  Set the upload artifact.The upload artifact file
                              generated by build process will be writtento
                              this file and later used by upload command.
                              [default: artifact.json]
  -g, --generate-only         Only generate the Python classes from the schema
                              definitions. Do not do a full build or create an
                              upload artifact.  [default: False]
  -h, --help                  Show this message and exit.
```