# Release Notes - 0.4.0

## New + Improved

* Added a new CLI command [download_logs](/References/CLI.md#download_logs) to download plugin generated logs from the Delphix Engine.
* Added an optional argument check to some [platform library](/References/Platform_Libraries.md) functions. When `check=true`, the platform library function checks the `exit_code` and raises an exception if it is non-zero.
* Modified CLI command `init` to auto-generate default implementations of all required plugin operations.
* Improved CLI [build](/References/CLI.md#build) validation for:
    * Required plugin operations.
    * Incorrect plugin operation arguments.
    * Plugin Config fields: `entryPoint` and `schemaFile`.
* Improved runtime validation and error messages for:
    * Objects returned from plugin operations.
    * Platform Classes during instantiation.
    * Plugin Library function arguments.
* Added support for Docker based plugins by using `rootSquashEnabled: false` in the [plugin config](/References/Plugin_Config.md).
* Added Job and thread information to plugin generated log messages to increase diagnosability and observability.

## Breaking Changes

* Added a new argument `snapshot_parameters` to a couple of plugin operations. This argument will allow the end user to indicate to the plugin whether or not to initiate a full ingestion of the dSource. More details about this argument are [here](/Building_Your_First_Plugin/Data_Ingestion.md).The following plugin operations will have to be updated in the plugin source code to add the new argument and match the updated method signatures; failing to do so would cause errors during the [build](/References/CLI.md#build):
    * [Staged Linked Source Pre-Snapshot](/References/Plugin_Operations.md#staged-linked-source-pre-snapshot)
    * [Staged Linked Source Post-Snapshot](/References/Plugin_Operations.md#staged-linked-source-post-snapshot)
* [StagedSource](/References/Classes.md#stagedsource) properties have been modified and all accesses to these fields will need to be updated in the plugin source code; failing to do so would cause failures at runtime if an invalid field is accessed.
    * `connection` has been modified to `source_connection`.
    * `staged_connection` has been added to allow connecting to the staging environment.

## Fixed

* Allow access to nested package resources via `pkgutil.get_data`.
* Fixed Out of Memory exceptions.
* Fixed missing or incorrectly populated fields for the following classes:

    | Class | Field |
    | ----- | ----- |
    | [VirtualSource](/References/Classes.md#virtualsource) | `mounts` |
    | RemoteUser | `name` |
    | RemoteEnvironment | `name` |
    | RemoteHost | `name` `binary_path` |

* Recreate the plugin's log directory if a plugin is deleted and re-uploaded to the Delphix Engine.
* Mark incorrectly provisioned VDBs as unusable.
* Better error messages when incorrect environment types are used for Platform Libraries.
* Better error messages when a plugin's `schemaFile` is updated and the plugin is re-uploaded to the Delphix Engine, with clear instructions on how to proceed.
* Fixed failures on Windows for CLI command `build`.
